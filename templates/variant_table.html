{% block variant_table %}
<script>
    $(document).ready(function() {
        window.table_variants = {{ table_variants|tojson|safe }};

        $("#variants_loading").hide();
        $("#variants_table_container").show();
        $("#variant_table").tablesorter({widthFixed: true});
{#                .tablesorterPager({container: $("#pager"), positionFixed: false});#}
{#        if (window.table_variants.length <= 10) {#}
            $('#pager').hide();
{#        }#}
    });
</script>
<div id="variants_loading">Loading variants...</div>
<div id="variants_table_container" style="display: none;">
    <table id="variant_table" class="tablesorter">
        <thead>
            <tr>
                <th>Variant</th>
                <th>Position</th>
                <th>Filter</th>
                <th>Annotation</th>
                <th>Allele Count</th>
                <th>Allele Frequency</th>
            </tr>
        </thead>
        <tbody>
        {% for variant in table_variants %}
            <tr class="table_variant" category="{{ variant.category }}" filter_status="{{ variant.filter }}">
                <td>
                    {% if variant.rsid == '.' %}
                        <a href="/variant/{{ variant.chrom }}-{{ variant.pos }}-{{ variant.ref }}-{{ variant.alt }}">
                            {{ variant.chrom }}:{{ variant.pos }}
                            {% if variant.ref|length > 20 %}
                                {{ variant.ref[1:20] }}...
                            {% else %}
                                {{ variant.ref }}
                            {% endif %} /
                            {% if variant.alt|length > 20 %}
                                {{ variant.alt[1:20] }}...
                            {% else %}
                                {{ variant.alt }}
                            {% endif %}

                        </a>
                    {% else %}
                        <a href="/variant/{{ variant.chrom }}-{{ variant.pos }}-{{ variant.ref }}-{{ variant.alt }}">
                            {{ variant.rsid }}
                        </a>
                    {% endif %}
                </td>
                <td> {{ variant.pos }}</td>
                <td> {{ variant.filter }} </td>
                <td> {{ variant.major_consequence }} </td>
                <td> {{ variant.allele_count }} </td>
                <td> {{ variant.allele_freq }} </td>
            </tr>
        {% endfor %}
        <tbody>
    </table>
    <div id="pager" class="pager">
        <form>
            <i class="fa fa-caret-square-o-left fa-2x first link"></i>
            <i class="fa fa-caret-left fa-2x prev link"></i>
            <input type="text" class="pagedisplay" style="display: none;"/>
            <i class="fa fa-caret-right fa-2x next link"></i>
            <i class="fa fa-caret-square-o-right fa-2x last link"></i>
            <select class="pagesize">
                <option selected="selected" value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
                <option value="100000">All</option>
            </select>
        </form>
    </div>
</div>
{% endblock %}