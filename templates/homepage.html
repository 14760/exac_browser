{% extends "layout.html" %}
{% block body %}
    <div class="container">
        <h1 id="home-title"><i class="fa fa-institution"></i> ExAC | Exome Aggregation Consortium</h1>
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <div id="home-searchbox">
                    <form action="/awesome">
                        <input type="submit" style="display: none;"/>
                        <input id="home-searchbox-input" name="query" class="form-control input-lg" type="text" placeholder="Search for a gene or variant or region"/>
                    </form>
                    <p class="text-muted">
                        Examples - Gene: <a href="/gene/ENSG00000186092">OR4F5</a>,
                        Transcript: <a href="/transcript/ENST00000335137">ENST00000335137</a>,
                        Variant: <a href="/variant/1-69511-A-G">1-69511-A-G</a>,
                        Multi-alleleic variant: <a href="/awesome?query=rs75062661">rs75062661</a>,
                        Region: <a href="/region/1-69509-69515">1:69509-69515</a>
                    </p>
                </div>
            </div>
            <div class="col-md-6 col-md-offset-3">
                <div id="exac_pca">
                    <img height="315px" width="444px" src="{{ url_for('static', filename='images/exac_pca3.gif') }}">
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(function() {
            var bestPictures = new Bloodhound({
              datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
              queryTokenizer: Bloodhound.tokenizers.whitespace,
              remote: '/autocomplete/%QUERY'
            });

            bestPictures.initialize();

            $('#home-searchbox-input').typeahead(null, {
                name: 'best-pictures',
                displayKey: 'value',
                source: bestPictures.ttAdapter(),
                highlight: true,
            });
            $('#home-searchbox-input').bind('typeahead:selected', function(obj, datum) {
                window.location.href = '/awesome?query=' + datum.value;
            });
        });
    </script>
{% endblock %}